## 简介

## 实践

## 困惑

在运行启动脚本的过程中遇到了一个问题, 就是使用脚本 stop 进程的时候,
进程会变成僵尸进程(Zombies), 而不是正常停止.

但如果不使用 nohup, 直接在前台运行, 然后在另一个终端中关闭, 是会关闭的.

这个问题困扰了我很久, 直到看到 stackoverflow上的
[类似问题](https://stackoverflow.com/questions/36050503/golang-child-processes-become-zombies).

这是在评论中发现的, 有时候豁然开朗就在一瞬间,

  If you're running the process (even if you've called wait finally) inside the docker container with pid:1, 
  it will also lead to a zombie. github.com/krallin/tini will be helpful in this case. – McKelvin Mar 8 '17 at 11:34

只要在 docker-compose 中设置 init 为 true 就行了, 类似这样:

```yaml
version: "3.7"
services:
  web:
    image: alpine:latest
    init: true
```

这会在 docker 容器内运行一个 init 来转发信号, 默认的 init 程序就是上面提到的 Tini.

## 总结

